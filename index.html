<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stromverbrauch Slider</title>
<style>
  body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background-color: transparent; }
  .box { background: white; padding: 20px; border-radius: 12px; border: 1px solid #ddd; text-align: center; width: 100%; max-width: 400px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
  h3 { margin: 0 0 15px 0; color: #333; }
  .big-number { font-size: 42px; font-weight: 800; color: #EAB308; margin-bottom: 10px; }
  .unit { font-size: 16px; color: #999; font-weight: 400; }
  input[type=range] { width: 100%; margin-bottom: 20px; accent-color: #EAB308; cursor: pointer; }
  .buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 20px; }
  .btn-small { background: #f1f5f9; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-size: 13px; transition: background 0.2s; }
  .btn-send { background: #EAB308; color: black; font-weight: bold; border: none; padding: 14px; width: 100%; border-radius: 8px; font-size: 16px; cursor: pointer; }
  .btn-send:hover { background: #ca8a04; }
</style>
</head>
<body>

<div class="box">
  <h3>Dein Stromverbrauch?</h3>
  <div class="big-number">
    <span id="val">2500</span> <span class="unit">kWh</span>
  </div>
   
  <input type="range" id="rng" min="500" max="8000" step="100" value="2500" oninput="up(this.value)">
   
  <div class="buttons">
    <button onclick="up(1500)" class="btn-small">ğŸ‘¤ 1 Person</button>
    <button onclick="up(2500)" class="btn-small">ğŸ‘¥ 2 Pers.</button>
    <button onclick="up(3500)" class="btn-small">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ 3 Pers.</button>
    <button onclick="up(4250)" class="btn-small">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ 4+ Pers.</button>
  </div>
   
  <button id="sendBtn" onclick="sendToTypebot()" class="btn-send">Wert Ã¼bernehmen</button>
</div>

<script>
  function up(v) {
    document.getElementById('val').innerText = v;
    document.getElementById('rng').value = v;
  }
   
  function sendToTypebot() {
    // 1. Feedback geben (Farbe Ã¤ndern)
    var btn = document.getElementById('sendBtn');
    btn.innerText = "Sende...";
    btn.style.backgroundColor = "#00ff00"; // KnallgrÃ¼n

    var v = document.getElementById('rng').value.toString();
    
    // Debugging-Nachricht (Pop-up)
    // Wenn das NICHT kommt, ist der Button kaputt.
    // Wenn das kommt, aber Typebot nichts macht, liegt es an Typebot.
    console.log("Versuche zu senden: " + v);

    // 2. Senden
    try {
        if (window.parent) {
            window.parent.postMessage({ message: v }, "*");
            console.log("Gesendet via window.parent");
        }
    } catch(e) {
        btn.innerText = "Fehler!";
        btn.style.backgroundColor = "red";
        alert("Fehler: " + e.message);
    }
  }
</script>

</body>
</html>
